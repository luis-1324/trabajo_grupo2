<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda de Smartphones</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <ul class="nav-links">
                <li><a href="login.php">Inicio</a></li>
                <li><a href="productos.html">Productos</a></li>
                <li><a href="Carrito.html">carrito</a></li>
    <style>
        .card {
            margin-bottom: 20px;
            transition: transform 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .card-img-top {
            height: 200px;
            object-fit: contain;
            padding: 10px;
        }
        .price {
            font-weight: bold;
            color: #0d6efd;
        }
        .btn-agregar {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h1 class="text-center mb-4">Tienda de Smartphones</h1>
        
        <div class="row">
            <!-- Samsung Galaxy S20 FE -->
            <div class="col-md-4">
                <div class="card">
                    <img src="https://i.pinimg.com/736x/fe/39/1c/fe391c9f64bf4b085f8942565ea2ed1f.jpg" class="card-img-top" alt="Samsung Galaxy S20 FE">
                    <div class="card-body">
                        <h5 class="card-title">Samsung Galaxy S20 FE</h5>
                        <p class="card-text">Smartphone de gama alta con excelente cámara</p>
                        <p class="card-text price">$1.770.000</p>
                        <button class="btn btn-info" 
                            data-bs-toggle="modal" 
                            data-bs-target="#detalle-producto"
                            data-bs-nombre="Samsung Galaxy S20 FE"
                            data-bs-precio="1.770.000"
                            data-bs-descripcion="El Samsung Galaxy S20 FE es un smartphone de gama alta con pantalla AMOLED de 6.5 pulgadas, procesador Snapdragon 865, triple cámara trasera de 12MP + 12MP + 8MP, y batería de 4500mAh. Ofrece conectividad 5G, carga rápida y un diseño elegante, ideal para quienes buscan rendimiento y calidad fotográfica.">
                            Ver detalles
                        </button>
                        <button class="btn btn-primary agregar-carrito btn-agregar" 
                            data-nombre="Samsung Galaxy S20 FE" 
                            data-precio="1770000">
                            <i class="bi bi-cart-plus"></i> Agregar al carrito
                        </button>
                    </div> 
                </div>
            </div>

            <!-- Samsung Galaxy S24 FE -->
            <div class="col-md-4">
                <div class="card">
                    <img src="https://i.pinimg.com/736x/fa/a9/e5/faa9e59b8f3cc81f4f8e6ac05e1b31f4.jpg" class="card-img-top" alt="Samsung Galaxy S24 FE">
                    <div class="card-body">
                        <h5 class="card-title">Samsung Galaxy S24 FE</h5>
                        <p class="card-text">Lo último en tecnología Samsung</p>
                        <p class="card-text price">$17.000.000</p>
                        <button class="btn btn-info" 
                            data-bs-toggle="modal" 
                            data-bs-target="#detalle-producto"
                            data-bs-nombre="Samsung Galaxy S24 FE"
                            data-bs-precio="17.000.000"
                            data-bs-descripcion="El Samsung Galaxy S24 FE es un smartphone de gama alta con pantalla AMOLED de 6.5 pulgadas, procesador Snapdragon 865, triple cámara trasera de 12MP + 12MP + 8MP, y batería de 4500mAh. Ofrece conectividad 5G, carga rápida y un diseño elegante, ideal para quienes buscan rendimiento y calidad fotográfica.">
                            Ver detalles
                        </button>
                        <button class="btn btn-primary agregar-carrito btn-agregar" 
                            data-nombre="Samsung Galaxy S24 FE" 
                            data-precio="17000000">
                            <i class="bi bi-cart-plus"></i> Agregar al carrito
                        </button>
                    </div>
                </div>
            </div>

            <!-- Xiaomi 12 Pro -->
            <div class="col-md-4">
                <div class="card">
                    <img src="https://i.pinimg.com/736x/34/83/43/348343852c6496a232b032f785ebb2d6.jpg" class="card-img-top" alt="Xiaomi 12 Pro">
                    <div class="card-body">
                        <h5 class="card-title">Xiaomi 12 Pro</h5>
                        <p class="card-text">Potencia y calidad fotográfica</p>
                        <p class="card-text price">$2.000.000</p>
                        <button class="btn btn-info" 
                            data-bs-toggle="modal" 
                            data-bs-target="#detalle-producto"
                            data-bs-nombre="Xiaomi 12 Pro"
                            data-bs-precio="2.000.000"
                            data-bs-descripcion="El Xiaomi 12 Pro es un smartphone de alta gama con pantalla AMOLED de 6.73 pulgadas, procesador Snapdragon 8 Gen 1, triple cámara trasera de 50MP + 50MP + 50MP, y batería de 4600mAh. Ofrece carga rápida de 120W, conectividad 5G y un diseño premium, ideal para usuarios exigentes que buscan rendimiento y calidad fotográfica.">
                            Ver detalles
                        </button>
                        <button class="btn btn-primary agregar-carrito btn-agregar" 
                            data-nombre="Xiaomi 12 Pro" 
                            data-precio="2000000">
                            <i class="bi bi-cart-plus"></i> Agregar al carrito
                        </button>
                    </div>
                </div>
            </div>

            <!-- Samsung Galaxy A52s -->
            <div class="col-md-4">
                <div class="card">
                    <img src="https://i.pinimg.com/736x/60/50/90/605090c9668f9c8049ecd3466fcc88ea.jpg" class="card-img-top" alt="Samsung Galaxy A52s">
                    <div class="card-body">
                        <h5 class="card-title">Samsung Galaxy A52s</h5>
                        <p class="card-text">Excelente relación calidad-precio</p>
                        <p class="card-text price">$500.000</p>
                        <button class="btn btn-info" 
                            data-bs-toggle="modal" 
                            data-bs-target="#detalle-producto"
                            data-bs-nombre="Samsung Galaxy A52s"
                            data-bs-precio="500.000"
                            data-bs-descripcion="El Samsung Galaxy A52s es un smartphone de gama media con pantalla Super AMOLED de 6.5 pulgadas, procesador Snapdragon 778G, cuádruple cámara trasera de 64MP + 12MP + 5MP + 5MP, y batería de 4500mAh. Ofrece conectividad 5G, carga rápida y un diseño moderno, ideal para quienes buscan un equilibrio entre rendimiento y precio.">
                            Ver detalles
                        </button>
                        <button class="btn btn-primary agregar-carrito btn-agregar" 
                            data-nombre="Samsung Galaxy A52s"
                            data-precio="500000">
                            <i class="bi bi-cart-plus"></i> Agregar al carrito
                        </button>
                    </div>
                </div>
            </div>

            <!-- iPhone 13 Pro Max -->
            <div class="col-md-4">
                <div class="card">
                    <img src="https://i.pinimg.com/736x/75/0d/ad/750dad710f76cccd12e6fe0d163b7d65.jpg" class="card-img-top" alt="iPhone 13 Pro Max">
                    <div class="card-body">
                        <h5 class="card-title">iPhone 13 Pro Max</h5>
                        <p class="card-text">El buque insignia de Apple</p>
                        <p class="card-text price">$6.000.000</p>
                        <button class="btn btn-info" 
                            data-bs-toggle="modal" 
                            data-bs-target="#detalle-producto"
                            data-bs-nombre="iPhone 13 Pro Max"
                            data-bs-precio="6.000.000"
                            data-bs-descripcion="El iPhone 13 Pro Max es el buque insignia de Apple con pantalla Super Retina XDR de 6.7 pulgadas, procesador A15 Bionic, triple cámara trasera de 12MP con capacidades avanzadas de fotografía y video, y batería de larga duración. Ofrece conectividad 5G, Face ID y un diseño premium en acero inoxidable, ideal para usuarios que buscan lo mejor en tecnología móvil.">
                            Ver detalles
                        </button>
                        <button class="btn btn-primary agregar-carrito btn-agregar"
                            data-nombre="iPhone 13 Pro Max"
                            data-precio="6000000">
                            <i class="bi bi-cart-plus"></i> Agregar al carrito
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Detalles del Producto -->
    <div class="modal fade" id="detalle-producto" tabindex="-1" aria-labelledby="detalleProductoLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="detalleProductoLabel">Detalles del Producto</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <img id="modal-imagen" src="" class="img-fluid rounded" alt="">
                        </div>
                        <div class="col-md-6">
                            <h3 id="modal-nombre" class="mb-3"></h3>
                            <h4 class="text-success mb-4" id="modal-precio"></h4>
                            <p id="modal-descripcion" class="lead"></p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" id="btn-comprar-ahora">
                        <i class="bi bi-bag-check"></i> Comprar ahora
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Tu JavaScript personalizado -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
    // Configuración del modal (mantener este código)
    var modal = document.getElementById('detalle-producto');
    modal.addEventListener('show.bs.modal', function(event) {
        var button = event.relatedTarget;
        var nombre = button.getAttribute('data-bs-nombre');
        var precio = button.getAttribute('data-bs-precio');
        var descripcion = button.getAttribute('data-bs-descripcion');
        var imagen = button.closest('.card').querySelector('img').src;
        
        document.getElementById('modal-nombre').textContent = nombre;
        document.getElementById('modal-precio').textContent = '$' + formatPrice(precio);
        document.getElementById('modal-descripcion').textContent = descripcion;
        document.getElementById('modal-imagen').src = imagen;
    });

    // Cargar carrito existente o crear uno nuevo
    let carrito = JSON.parse(localStorage.getItem('Carrito')) || [];
    
    // Función para guardar el carrito en localStorage
    function guardarCarrito() {
        localStorage.setItem('Carrito', JSON.stringify(carrito));
        updateCartCounter();
    }
    
    // Función para agregar producto al carrito
    function agregarAlCarrito(nombre, precio, imagen) {
        // Convertir precio a número (eliminar puntos si existen)
        const precioNumerico = parseFloat(precio.toString().replace(/\./g, ''));
        
        // Buscar si el producto ya está en el carrito
        const productoExistente = carrito.find(item => item.nombre === nombre);
        
        if (productoExistente) {
            productoExistente.cantidad += 1;
        } else {
            carrito.push({
                nombre: nombre,
                precio: precioNumerico,
                imagen: imagen,
                cantidad: 1
            });
        }
        
        guardarCarrito();
        showToast(nombre, precioNumerico);
    }
    
    // Eventos para botones "Agregar al carrito"
    document.querySelectorAll('.agregar-carrito').forEach(function(boton) {
        boton.addEventListener('click', function() {
            const card = this.closest('.card');
            const nombre = this.getAttribute('data-nombre');
            const precio = this.getAttribute('data-precio');
            const imagen = card.querySelector('img').src;
            
            agregarAlCarrito(nombre, precio, imagen);
        });
    });
    
    // Botón comprar ahora en el modal
    document.getElementById('btn-comprar-ahora').addEventListener('click', function() {
        const nombre = document.getElementById('modal-nombre').textContent;
        const precioText = document.getElementById('modal-precio').textContent;
        const precio = precioText.replace('$', '').replace(/\./g, '');
        const imagen = document.getElementById('modal-imagen').src;
        
        agregarAlCarrito(nombre, precio, imagen);
        
        // Cerrar el modal
        const modal = bootstrap.Modal.getInstance(document.getElementById('detalle-producto'));
        modal.hide();
    });
    
    // Función para mostrar notificación
    function showToast(nombre, precio) {
        const toastHTML = `
            <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
                <div class="toast show align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="d-flex">
                        <div class="toast-body">
                            <i class="bi bi-check-circle-fill me-2"></i>
                            ${nombre} - $${formatPrice(precio)} agregado al carrito
                        </div>
                        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                </div>
            </div>
        `;
        
        const toastContainer = document.createElement('div');
        toastContainer.innerHTML = toastHTML;
        document.body.appendChild(toastContainer);
        
        setTimeout(function() {
            toastContainer.remove();
        }, 3000);
    }
    
    // Función para formatear precios
    function formatPrice(price) {
        return parseInt(price).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }
    
    // Función para actualizar contador del carrito
    function updateCartCounter() {
        // Calcular total de items (sumando cantidades)
        const totalItems = carrito.reduce((total, producto) => total + producto.cantidad, 0);
        
        let counter = document.getElementById('cart-counter');
        if (!counter) {
            const nav = document.createElement('div');
            nav.className = 'position-fixed top-0 end-0 p-3';
            nav.style.zIndex = '11';
            nav.innerHTML = `
                <a href="Carrito.html" class="btn btn-primary position-relative">
                    <i class="bi bi-cart-fill"></i>
                    <span id="cart-counter" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                        ${totalItems}
                    </span>
                </a>
            `;
            document.body.appendChild(nav);
        } else {
            counter.textContent = totalItems;
        }
    }
    
    // Inicializar contador al cargar la página
    updateCartCounter();
});
    </script>